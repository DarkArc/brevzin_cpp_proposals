<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="mpark/wg21" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2022-01-06" />
  <title>move_iterator&lt;T*&gt; should be a random access iterator</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f6f8fa; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span. { } /* Normal */
      code span.al { color: #ff0000; } /* Alert */
      code span.an { } /* Annotation */
      code span.at { } /* Attribute */
      code span.bn { color: #9f6807; } /* BaseN */
      code span.bu { color: #9f6807; } /* BuiltIn */
      code span.cf { color: #00607c; } /* ControlFlow */
      code span.ch { color: #9f6807; } /* Char */
      code span.cn { } /* Constant */
      code span.co { color: #008000; font-style: italic; } /* Comment */
      code span.cv { color: #008000; font-style: italic; } /* CommentVar */
      code span.do { color: #008000; } /* Documentation */
      code span.dt { color: #00607c; } /* DataType */
      code span.dv { color: #9f6807; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #9f6807; } /* Float */
      code span.fu { } /* Function */
      code span.im { } /* Import */
      code span.in { color: #008000; } /* Information */
      code span.kw { color: #00607c; } /* Keyword */
      code span.op { color: #af1915; } /* Operator */
      code span.ot { } /* Other */
      code span.pp { color: #6f4e37; } /* Preprocessor */
      code span.re { } /* RegionMarker */
      code span.sc { color: #9f6807; } /* SpecialChar */
      code span.ss { color: #9f6807; } /* SpecialString */
      code span.st { color: #9f6807; } /* String */
      code span.va { } /* Variable */
      code span.vs { color: #9f6807; } /* VerbatimString */
      code span.wa { color: #008000; font-weight: bold; } /* Warning */
      code.diff {color: #898887}
      code.diff span.va {color: #006e28}
      code.diff span.st {color: #bf0303}
  </style>
  <style type="text/css">
body {
margin: 5em;
font-family: serif;

hyphens: auto;
line-height: 1.35;
}
div.wrapper {
max-width: 60em;
margin: auto;
}
ul {
list-style-type: none;
padding-left: 2em;
margin-top: -0.2em;
margin-bottom: -0.2em;
}
a {
text-decoration: none;
color: #4183C4;
}
a.hidden_link {
text-decoration: none;
color: inherit;
}
li {
margin-top: 0.6em;
margin-bottom: 0.6em;
}
h1, h2, h3, h4 {
position: relative;
line-height: 1;
}
a.self-link {
position: absolute;
top: 0;
left: calc(-1 * (3.5rem - 26px));
width: calc(3.5rem - 26px);
height: 2em;
text-align: center;
border: none;
transition: opacity .2s;
opacity: .5;
font-family: sans-serif;
font-weight: normal;
font-size: 83%;
}
a.self-link:hover { opacity: 1; }
a.self-link::before { content: "§"; }
ul > li:before {
content: "\2014";
position: absolute;
margin-left: -1.5em;
}
:target { background-color: #C9FBC9; }
:target .codeblock { background-color: #C9FBC9; }
:target ul { background-color: #C9FBC9; }
.abbr_ref { float: right; }
.folded_abbr_ref { float: right; }
:target .folded_abbr_ref { display: none; }
:target .unfolded_abbr_ref { float: right; display: inherit; }
.unfolded_abbr_ref { display: none; }
.secnum { display: inline-block; min-width: 35pt; }
.header-section-number { display: inline-block; min-width: 35pt; }
.annexnum { display: block; }
div.sourceLinkParent {
float: right;
}
a.sourceLink {
position: absolute;
opacity: 0;
margin-left: 10pt;
}
a.sourceLink:hover {
opacity: 1;
}
a.itemDeclLink {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
opacity: 0;
}
a.itemDeclLink:hover { opacity: 1; }
span.marginalizedparent {
position: relative;
left: -5em;
}
li span.marginalizedparent { left: -7em; }
li ul > li span.marginalizedparent { left: -9em; }
li ul > li ul > li span.marginalizedparent { left: -11em; }
li ul > li ul > li ul > li span.marginalizedparent { left: -13em; }
div.footnoteNumberParent {
position: relative;
left: -4.7em;
}
a.marginalized {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
}
a.enumerated_item_num {
position: relative;
left: -3.5em;
display: inline-block;
margin-right: -3em;
text-align: right;
width: 3em;
}
div.para { margin-bottom: 0.6em; margin-top: 0.6em; text-align: justify; }
div.section { text-align: justify; }
div.sentence { display: inline; }
span.indexparent {
display: inline;
position: relative;
float: right;
right: -1em;
}
a.index {
position: absolute;
display: none;
}
a.index:before { content: "⟵"; }

a.index:target {
display: inline;
}
.indexitems {
margin-left: 2em;
text-indent: -2em;
}
div.itemdescr {
margin-left: 3em;
}
.bnf {
font-family: serif;
margin-left: 40pt;
margin-top: 0.5em;
margin-bottom: 0.5em;
}
.ncbnf {
font-family: serif;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
}
.ncsimplebnf {
font-family: serif;
font-style: italic;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
background: inherit; 
}
span.textnormal {
font-style: normal;
font-family: serif;
white-space: normal;
display: inline-block;
}
span.rlap {
display: inline-block;
width: 0px;
}
span.descr { font-style: normal; font-family: serif; }
span.grammarterm { font-style: italic; }
span.term { font-style: italic; }
span.terminal { font-family: monospace; font-style: normal; }
span.nonterminal { font-style: italic; }
span.tcode { font-family: monospace; font-style: normal; }
span.textbf { font-weight: bold; }
span.textsc { font-variant: small-caps; }
a.nontermdef { font-style: italic; font-family: serif; }
span.emph { font-style: italic; }
span.techterm { font-style: italic; }
span.mathit { font-style: italic; }
span.mathsf { font-family: sans-serif; }
span.mathrm { font-family: serif; font-style: normal; }
span.textrm { font-family: serif; }
span.textsl { font-style: italic; }
span.mathtt { font-family: monospace; font-style: normal; }
span.mbox { font-family: serif; font-style: normal; }
span.ungap { display: inline-block; width: 2pt; }
span.textit { font-style: italic; }
span.texttt { font-family: monospace; }
span.tcode_in_codeblock { font-family: monospace; font-style: normal; }
span.phantom { color: white; }

span.math { font-style: normal; }
span.mathblock {
display: block;
margin-left: auto;
margin-right: auto;
margin-top: 1.2em;
margin-bottom: 1.2em;
text-align: center;
}
span.mathalpha {
font-style: italic;
}
span.synopsis {
font-weight: bold;
margin-top: 0.5em;
display: block;
}
span.definition {
font-weight: bold;
display: block;
}
.codeblock {
margin-left: 1.2em;
line-height: 127%;
}
.outputblock {
margin-left: 1.2em;
line-height: 127%;
}
div.itemdecl {
margin-top: 2ex;
}
code.itemdeclcode {
white-space: pre;
display: block;
}
span.textsuperscript {
vertical-align: super;
font-size: smaller;
line-height: 0;
}
.footnotenum { vertical-align: super; font-size: smaller; line-height: 0; }
.footnote {
font-size: small;
margin-left: 2em;
margin-right: 2em;
margin-top: 0.6em;
margin-bottom: 0.6em;
}
div.minipage {
display: inline-block;
margin-right: 3em;
}
div.numberedTable {
text-align: center;
margin: 2em;
}
div.figure {
text-align: center;
margin: 2em;
}
table {
border: 1px solid black;
border-collapse: collapse;
margin-left: auto;
margin-right: auto;
margin-top: 0.8em;
text-align: left;
hyphens: none; 
}
td, th {
padding-left: 1em;
padding-right: 1em;
vertical-align: top;
}
td.empty {
padding: 0px;
padding-left: 1px;
}
td.left {
text-align: left;
}
td.right {
text-align: right;
}
td.center {
text-align: center;
}
td.justify {
text-align: justify;
}
td.border {
border-left: 1px solid black;
}
tr.rowsep, td.cline {
border-top: 1px solid black;
}
tr.even, tr.odd {
border-bottom: 1px solid black;
}
tr.capsep {
border-top: 3px solid black;
border-top-style: double;
}
tr.header {
border-bottom: 3px solid black;
border-bottom-style: double;
}
th {
border-bottom: 1px solid black;
}
span.centry {
font-weight: bold;
}
div.table {
display: block;
margin-left: auto;
margin-right: auto;
text-align: center;
width: 90%;
}
span.indented {
display: block;
margin-left: 2em;
margin-bottom: 1em;
margin-top: 1em;
}
ol.enumeratea { list-style-type: none; background: inherit; }
ol.enumerate { list-style-type: none; background: inherit; }

code.sourceCode > span { display: inline; }
</style>
  <style type="text/css">a {
color : #4183C4;
text-decoration: underline;
}
a.marginalized {
text-decoration: none;
}
a.self-link {
text-decoration: none;
}
h1#toctitle {
border-bottom: 1px solid #cccccc;
}
#TOC li {
margin-top: 1px;
margin-bottom: 1px;
}
#TOC ul>li:before { display: none; }
h3.subtitle { margin-top: -15px; }
h1:target { background-color: transparent; }
h2:target { background-color: transparent; }
h3:target { background-color: transparent; }
h4:target { background-color: transparent; }
h5:target { background-color: transparent; }
h6:target { background-color: transparent; }
code span.co { font-family: monospace; }
table tr {
background-color: white;
}
table tr:nth-child(2n) {
background-color: #f6f8fa;
}
#title-block-header > table tr:nth-child(2n) {
background-color: white;
}
td > div.sourceCode {
background-color: inherit;
}
table {
border-collapse: collapse;
}
table td, table th {
border: 1px solid #cccccc;
}
table th {
border-bottom: 1px solid black;
text-align: center;
}
table tr:first-child th {
border-top: 0;
}
table tr:last-child td {
border-bottom: 0;
}
table tr td:first-child,
table tr th:first-child {
border-left: 0;
}
table tr td:last-child,
table tr th:last-child {
border-right: 0;
}
table tbody tr:first-child td {
border-top: 1px solid black;
}
#title-block-header td { border: 0; }
@media all {
body {
margin: 2em;
}
}
@media screen and (min-width: 480px) {
body {
margin: 5em;
}
}
#refs code{padding-left: 0px; text-indent: 0px;}
:root {
--diff-ins: #e6ffed;
--diff-strongins: #acf2bd;
--diff-del: #ffdddd;
--diff-strongdel: #ff8888;
}
span.diffins {
background-color: var(--diff-strongins);
}
span.diffdel {
background-color: var(--diff-strongdel);
}
div.rm { text-decoration: line-through; }
div.rm code.sourceCode { text-decoration: line-through; }
div.addu, span.addu {
color: #006e28;
background-color: var(--diff-ins);
}

div.rm pre, div.add pre { background-color: #f6f8fa; }
div.addu pre { background-color: var(--diff-ins); }
div.add, div.add pre { background-color: var(--diff-ins); }
div.addu blockquote {
border-left: 4px solid #00a000;
padding: 0 15px;
color: #006e28;
text-decoration: none;
}
div.addu blockquote code.sourceCode { text-decoration: none; }
div.addu blockquote pre { text-decoration: none; }
div.addu blockquote pre code { text-decoration: none; }
div.quote {
border-left: 7px solid #ccc;
background: #f9f9f9;
margin: 1.5em 10px;
padding-left: 20px;
}
code.diff span.va { color: #000000; background-color: var(--diff-ins); }
code.diff span.st { color: #000000; background-color: var(--diff-del); }
</style>
  <link href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAVoJEAN6CRADegkQAWIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wCCRAAAgkQAAIJEAACCRAAsgkQAvoJEAP+CRAD/gkQA/4JEAP+CRADAgkQALoJEAACCRAAAgkQAAP///wD///8AgkQAAIJEABSCRACSgkQA/IJEAP99PQD/dzMA/3czAP99PQD/gkQA/4JEAPyCRACUgkQAFIJEAAD///8A////AHw+AFiBQwDqgkQA/4BBAP9/PxP/uZd6/9rJtf/bybX/upd7/39AFP+AQQD/gkQA/4FDAOqAQgBc////AP///wDKklv4jlEa/3o7AP+PWC//8+3o///////////////////////z7un/kFox/35AAP+GRwD/mVYA+v///wD///8A0Zpk+NmibP+0d0T/8evj///////+/fv/1sKz/9bCs//9/fr//////+/m2/+NRwL/nloA/5xYAPj///8A////ANKaZPjRmGH/5cKh////////////k149/3UwAP91MQD/lmQ//86rhv+USg3/m1YA/5hSAP+bVgD4////AP///wDSmmT4zpJY/+/bx///////8+TV/8mLT/+TVx//gkIA/5lVAP+VTAD/x6B//7aEVv/JpH7/s39J+P///wD///8A0ppk+M6SWP/u2sf///////Pj1f/Nj1T/2KFs/8mOUv+eWhD/lEsA/8aee/+0glT/x6F7/7J8Rvj///8A////ANKaZPjRmGH/48Cf///////+/v7/2qt//82PVP/OkFX/37KJ/86siv+USg7/mVQA/5hRAP+bVgD4////AP///wDSmmT40ppk/9CVXP/69O////////7+/v/x4M//8d/P//7+/f//////9u7n/6tnJf+XUgD/nFgA+P///wD///8A0ppk+NKaZP/RmWL/1qNy//r07///////////////////////+vXw/9akdP/Wnmn/y5FY/6JfFvj///8A////ANKaZFTSmmTo0ppk/9GYYv/Ql1//5cWm//Hg0P/x4ND/5cWm/9GXYP/RmGH/0ppk/9KaZOjVnmpY////AP///wDSmmQA0ppkEtKaZI7SmmT60ppk/9CWX//OkVb/zpFW/9CWX//SmmT/0ppk/NKaZJDSmmQS0ppkAP///wD///8A0ppkANKaZADSmmQA0ppkKtKaZLrSmmT/0ppk/9KaZP/SmmT/0ppkvNKaZCrSmmQA0ppkANKaZAD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkUtKaZNzSmmTc0ppkVNKaZADSmmQA0ppkANKaZADSmmQA////AP5/AAD4HwAA4AcAAMADAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAMADAADgBwAA+B8AAP5/AAAoAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAyCRACMgkQA6oJEAOqCRACQgkQAEIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRABigkQA5oJEAP+CRAD/gkQA/4JEAP+CRADqgkQAZoJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAA4gkQAwoJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQAxIJEADyCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAP///wD///8A////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAWgkQAmIJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAJyCRAAYgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAdIJEAPCCRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAPSCRAB4gkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQASoJEANKCRAD/gkQA/4JEAP+CRAD/g0YA/39AAP9zLgD/bSQA/2shAP9rIQD/bSQA/3MuAP9/PwD/g0YA/4JEAP+CRAD/gkQA/4JEAP+CRADUgkQAToJEAACCRAAAgkQAAP///wD///8A////AP///wB+PwAAgkUAIoJEAKiCRAD/gkQA/4JEAP+CRAD/hEcA/4BBAP9sIwD/dTAA/5RfKv+viF7/vp56/76ee/+wiF7/lWAr/3YxAP9sIwD/f0AA/4RHAP+CRAD/gkQA/4JEAP+CRAD/gkQArIJEACaBQwAA////AP///wD///8A////AIBCAEBzNAD6f0EA/4NFAP+CRAD/gkQA/4VIAP92MwD/bSUA/6N1Tv/ezsL/////////////////////////////////38/D/6V3Uv9uJgD/dTEA/4VJAP+CRAD/gkQA/4JEAP+BQwD/fUAA/4FDAEj///8A////AP///wD///8AzJRd5qBlKf91NgD/dDUA/4JEAP+FSQD/cy4A/3YyAP/PuKP//////////////////////////////////////////////////////9K7qP94NQD/ciwA/4VJAP+CRAD/fkEA/35BAP+LSwD/mlYA6v///wD///8A////AP///wDdpnL/4qx3/8KJUv+PUhf/cTMA/3AsAP90LgD/4dK+/////////////////////////////////////////////////////////////////+TYxf91MAD/dTIA/31CAP+GRwD/llQA/6FcAP+gWwD8////AP///wD///8A////ANGZY/LSm2X/4ap3/92mcP+wdT3/byQA/8mwj////////////////////////////////////////////////////////////////////////////+LYxv9zLgP/jUoA/59bAP+hXAD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/RmWL/1p9q/9ubXv/XqXj////////////////////////////7+fD/vZyG/6BxS/+gcUr/vJuE//r37f//////////////////////3MOr/5dQBf+dVQD/nVkA/5xYAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmWP/yohJ//jo2P//////////////////////4NTG/4JDFf9lGAD/bSQA/20kAP9kGAD/fz8S/+Xb0f//////5NG9/6txN/+LOgD/m1QA/51aAP+cWAD/m1cA/5xYAP+cWADy////AP///wD///8A////ANKaZPLSmmT/0ppk/8+TWf/Unmv//v37//////////////////////+TWRr/VwsA/35AAP+ERgD/g0UA/4JGAP9lHgD/kFga/8KXX/+TRwD/jT4A/49CAP+VTQD/n10A/5xYAP+OQQD/lk4A/55cAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/y4tO/92yiP//////////////////////8NnE/8eCQP+rcTT/ez0A/3IyAP98PgD/gEMA/5FSAP+USwD/jj8A/5lUAP+JNwD/yqV2/694Mf+HNQD/jkAA/82rf/+laBj/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/LiUr/4byY///////////////////////gupX/0I5P/+Wuev/Lklz/l1sj/308AP+QSwD/ol0A/59aAP+aVQD/k0oA/8yoh///////+fXv/6pwO//Lp3v///////Pr4f+oay7y////AP///wD///8A////ANKaZPLSmmT/0ppk/8uJSv/hvJj//////////////////////+G7l//Jhkb/0ppk/96nc//fqXX/x4xO/6dkFP+QSQD/llEA/5xXAP+USgD/yaOA///////38uv/qG05/8ijdv//////8efb/6ZpLPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/zIxO/9yxh///////////////////////7dbA/8iEQf/Sm2X/0Zlj/9ScZv/eqHf/2KJv/7yAQf+XTgD/iToA/5lSAP+JNgD/yKFv/611LP+HNQD/jT8A/8qmeP+kZRT/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/Pk1n/1J5q//78+//////////////////+/fv/1aFv/8iEQv/Tm2b/0ppl/9GZY//Wn2z/1pZc/9eldf/Bl2b/kUcA/4w9AP+OQAD/lUwA/59eAP+cWQD/jT8A/5ZOAP+eXADy////AP///wD///8A////ANKaZPLSmmT/0ppk/9KZY//KiEn/8d/P///////////////////////47+f/05tm/8iCP//KiEj/yohJ/8eCP//RmGH//vfy///////n1sP/rXQ7/4k4AP+TTAD/nVoA/5xYAP+cVwD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/0ptl/8uLTf/aq37////////////////////////////+/fz/6c2y/961jv/etY7/6Myx//78+v//////////////////////3MWv/5xXD/+ORAD/mFQA/51ZAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmmT/0ppk/8mFRP/s1b//////////////////////////////////////////////////////////////////////////////+PD/0JFU/7NzMv+WUQD/kUsA/5tXAP+dWQDy////AP///wD///8A////ANKaZP/SmmT/0ppk/9KaZP/Sm2X/z5NZ/8yMT//z5NX/////////////////////////////////////////////////////////////////9Ofa/8yNUP/UmGH/36p5/8yTWv+qaSD/kksA/5ROAPz///8A////AP///wD///8A0ppk5NKaZP/SmmT/0ppk/9KaZP/TnGf/zY9T/82OUv/t1sD//////////////////////////////////////////////////////+7Yw//OkFX/zI5R/9OcZ//SmmP/26V0/9ymdf/BhUf/ol8R6P///wD///8A////AP///wDSmmQ80ppk9tKaZP/SmmT/0ppk/9KaZP/TnGj/zpFW/8qJSv/dson/8uHS//////////////////////////////////Lj0//etIv/y4lL/86QVf/TnGj/0ppk/9KaZP/RmWP/05xn/9ymdfjUnWdC////AP///wD///8A////ANKaZADSmmQc0ppkotKaZP/SmmT/0ppk/9KaZP/Tm2b/0Zli/8qJSf/NjlH/16Z3/+G8mP/myKr/5siq/+G8mP/Xp3f/zY5S/8qISf/RmGH/05tm/9KaZP/SmmT/0ppk/9KaZP/SmmSm0pljINWdaQD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkQtKaZMrSmmT/0ppk/9KaZP/SmmT/0ptl/9GYYf/Nj1P/y4lL/8qISP/KiEj/y4lK/82PU//RmGH/0ptl/9KaZP/SmmT/0ppk/9KaZP/SmmTO0ppkRtKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZGzSmmTu0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmTw0ppkcNKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZBLSmmSQ0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppklNKaZBTSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQy0ppkutKaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppkvtKaZDbSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkXNKaZODSmmT/0ppk/9KaZP/SmmT/0ppk5NKaZGDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkBtKaZIbSmmTo0ppk6tKaZIrSmmQK0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP/8P///+B///+AH//+AAf//AAD//AAAP/AAAA/gAAAHwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA+AAAAfwAAAP/AAAP/8AAP//gAH//+AH///4H////D//" rel="icon" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  
</head>
<body>
<div class="wrapper">
<header id="title-block-header">
<h1 class="title" style="text-align:center"><code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> should be a random access iterator</h1>

<table style="border:none;float:right">
  <tr>
    <td>Document #:</td>
    <td>P2520R0</td>
  </tr>
  <tr>
    <td>Date:</td>
    <td>2022-01-06</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Project:</td>
    <td>Programming Language C++</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Audience:</td>
    <td>
      LEWG<br>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top">Reply-to:</td>
    <td>
      Barry Revzin<br>&lt;<a href="mailto:barry.revzin@gmail.com" class="email">barry.revzin@gmail.com</a>&gt;<br>
    </td>
  </tr>
</table>

</header>
<div style="clear:both">
<div id="TOC" role="doc-toc">
<h1 id="toctitle">Contents</h1>
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction<span></span></a>
<ul>
<li><a href="#c20-iterator-improvements"><span class="toc-section-number">1.1</span> C++20 iterator improvements<span></span></a></li>
<li><a href="#why-does-this-matter"><span class="toc-section-number">1.2</span> Why does this matter<span></span></a></li>
<li><a href="#what-does-single-pass-actually-mean"><span class="toc-section-number">1.3</span> What does single-pass actually mean?<span></span></a></li>
</ul></li>
<li><a href="#proposal"><span class="toc-section-number">2</span> Proposal<span></span></a></li>
<li><a href="#bibliography"><span class="toc-section-number">3</span> References<span></span></a></li>
</ul>
</div>
<h1 data-number="1" style="border-bottom:1px solid #cccccc" id="introduction"><span class="header-section-number">1</span> Introduction<a href="#introduction" class="self-link"></a></h1>
<p><code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>Iter<span class="op">&gt;</span></code> was added in C++11 as an iterator adaptor that wraps <code class="sourceCode cpp">Iter</code> and changed only its <code class="sourceCode cpp"><span class="kw">operator</span><span class="op">*()</span></code>, such that dereferencing a <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>Iter<span class="op">&gt;</span></code> would give you an rvalue reference if dereferencing an <code class="sourceCode cpp">Iter</code> gave you an lvalue reference. Originally, the <code class="sourceCode cpp">iterator_category</code> of a <code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>Iter<span class="op">&gt;</span></code> was simply propagated from <code class="sourceCode cpp">Iter</code>’s (so <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span><span class="dt">int</span><span class="op">*&gt;::</span>iterator_category</code> was <code class="sourceCode cpp">random_access_iterator_tag</code>), but then there was some discussion about whether it should instead <em>always</em> be <code class="sourceCode cpp">input_iterator_tag</code>. That discussion was resolved in <span class="citation" data-cites="LWG1211">[<a href="#ref-LWG1211" role="doc-biblioref">LWG1211</a>]</span> in favor of keeping the iterator category stronger, for performance reasons.</p>
<p>Howard Hinnant’s example from that issue was:</p>
<div class="quote">
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1"></a>vector<span class="op">&lt;</span>A<span class="op">&gt;</span> v;</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">//  ... build up a large vector of A ...</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>vector<span class="op">&lt;</span>A<span class="op">&gt;</span> temp;</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">//  ... build up a large temporary vector of A to later be inserted ...</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">typedef</span> move_iterator<span class="op">&lt;</span>vector<span class="op">&lt;</span>A<span class="op">&gt;::</span>iterator<span class="op">&gt;</span> MI;</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">//  Now insert the temporary elements:</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>v<span class="op">.</span>insert<span class="op">(</span>v<span class="op">.</span>begin<span class="op">()</span> <span class="op">+</span> N, MI<span class="op">(</span>temp<span class="op">.</span>begin<span class="op">())</span>, MI<span class="op">(</span>temp<span class="op">.</span>end<span class="op">()))</span>;</span></code></pre></div>
<p>A major motivation for using <code class="sourceCode cpp">move_iterator</code> in the above example is the expectation that <code class="sourceCode cpp">A</code> is cheap to move but expensive to copy. I.e. the customer is looking for <em>high performance</em>. If we allow <code class="sourceCode cpp">vector<span class="op">::</span>insert</code> to subtract two <code class="sourceCode cpp">MI</code>’s to get the distance between them, the customer enjoys substantially better performance, compared to if we say that <code class="sourceCode cpp">vector<span class="op">::</span>insert</code> can not subtract two <code class="sourceCode cpp">MI</code>’s.</p>
<p>I can find no rationale for not giving this performance boost to our customers. Therefore I am strongly against restricting <code class="sourceCode cpp">move_iterator</code> to the <code class="sourceCode cpp">input_iterator_tag</code> category.</p>
</div>
<p>As a result, <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> is still, today, a C++17 input iterator.</p>
<p>However, the adoption of the One Ranges paper <span class="citation" data-cites="P0896R4">[<a href="#ref-P0896R4" role="doc-biblioref">P0896R4</a>]</span> changed things a little. <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>Iter<span class="op">&gt;</span></code> was adjusted to use the new <code class="sourceCode cpp">iter_move</code> customization point and also introduced a new <code class="sourceCode cpp">iterator_concept</code> type alias, the new customization for C++20 iterators. As a result, we’re in a little bit of an odd state because <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> is still a C++17 random access iterator (<code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;::</span>iterator_category</code> is still <code class="sourceCode cpp">std<span class="op">::</span>random_access_iterator_tag</code> and it has all the other operations), but it is only a C++20 input iterator (because <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;::</span>iterator_concept</code> exists and is only <code class="sourceCode cpp">std<span class="op">::</span>input_iterator_tag</code>, <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> only satisfies <code class="sourceCode cpp">std<span class="op">::</span>input_iterator</code> and not even <code class="sourceCode cpp">std<span class="op">::</span>forward_iterator</code>).</p>
<p>This difference is a bit jarring, since usually whenever some iterator has different C++17 and C++20 categories, the C++20 category is the <em>stronger</em> of the two (e.g. <code class="sourceCode cpp">views<span class="op">::</span>iota<span class="op">(</span><span class="dv">0</span>, <span class="dv">10</span><span class="op">)</span></code> is a C++20 random access range, but only a C++17 input range because its <code class="sourceCode cpp">reference</code> type is not a true reference). This is the one case in the standard library where the C++20 category is the <em>weaker</em> of the two.</p>
<h2 data-number="1.1" id="c20-iterator-improvements"><span class="header-section-number">1.1</span> C++20 iterator improvements<a href="#c20-iterator-improvements" class="self-link"></a></h2>
<p>There are several C++20 iterator improvements worth noting here before I get into the crux of the issue. One of the problems in the original C++17 model is that several operations were tied into the iterator category - that has now been split. Notably:</p>
<ul>
<li>you could only subtract two iterators, as in <code class="sourceCode cpp">e <span class="op">-</span> b</code>, if they were random access iterators</li>
<li>the only way to get the <em>size</em> of a range was to subtract iterators</li>
</ul>
<p>Both of those problems are no longer exist in C++20. We now have <code class="sourceCode cpp">sized_sentinel_for</code>, and an iterator <code class="sourceCode cpp">I</code> can model <code class="sourceCode cpp">sized_sentinel_for<span class="op">&lt;</span>I<span class="op">&gt;</span></code> even if it’s an input iterator. This allows generic code to determine the distance between two iterators by simply subtracting them. Additionally, we have ranges now, and a range can be a <code class="sourceCode cpp">sized_range</code> (giving you its <code class="sourceCode cpp">size</code> cheaply) even if it’s only an input range and even if its iterator do not model <code class="sourceCode cpp">sized_sentinel_for</code>.</p>
<h2 data-number="1.2" id="why-does-this-matter"><span class="header-section-number">1.2</span> Why does this matter<a href="#why-does-this-matter" class="self-link"></a></h2>
<p>The issue here is similar to Howard’s original example in that library issue. Between the adoption of <code class="sourceCode cpp">views<span class="op">::</span>move</code> under some name (<span class="citation" data-cites="P2446R1">[<a href="#ref-P2446R1" role="doc-biblioref">P2446R1</a>]</span>) and <code class="sourceCode cpp">ranges<span class="op">::</span>to</code> (<span class="citation" data-cites="P1206R6">[<a href="#ref-P1206R6" role="doc-biblioref">P1206R6</a>]</span>), users will be able to conveniently produce new containers on the fly. If they write:</p>
<blockquote>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1"></a>some_sized_range <span class="op">|</span> views<span class="op">::</span>move <span class="op">|</span> ranges<span class="op">::</span>to<span class="op">&lt;</span>vector<span class="op">&gt;()</span></span></code></pre></div>
</blockquote>
<p>Then this is still okay - <code class="sourceCode cpp">views<span class="op">::</span>move<span class="op">(</span>some_sized_range<span class="op">)</span></code> is still sized, so the <code class="sourceCode cpp">vector</code> still only has to do a single allocation even if the resulting range is just an input range. This isn’t really a problem.</p>
<p>But in the weaker case:</p>
<blockquote>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1"></a>some_unsized_forward_range <span class="op">|</span> views<span class="op">::</span>move <span class="op">|</span> ranges<span class="op">::</span>to<span class="op">&lt;</span>vector<span class="op">&gt;()</span></span></code></pre></div>
</blockquote>
<p>Now, suddenly, we can’t do a single allocation - now we’re trying to construct a <code class="sourceCode cpp">vector</code> from a non-sized input range, so the algorithm reduces to <code class="sourceCode cpp">push_back</code> in a loop. That’s… not great, and it would be nice to avoid.</p>
<p>The standard library <em>could</em> do better. In fact, even outside of the standard library, user code could do better too. We could, for instance, recognize a range as being some kind of <code class="sourceCode cpp">ranges<span class="op">::</span>move_view<span class="op">&lt;</span>R<span class="op">&gt;</span></code> and simply treat it as an <code class="sourceCode cpp">R</code> (there’s a <code class="sourceCode cpp"><span class="op">.</span>base<span class="op">()</span></code> member function for this) for the purposes of determining whether we can easily figure out the size. That is, subvert the range model by simplying special casing <code class="sourceCode cpp">move_view</code> in algorithms. This… is a thing that people could do, but doesn’t really seem especially great? If the model needs to be subverted, perhaps it’s the wrong model?</p>
<h2 data-number="1.3" id="what-does-single-pass-actually-mean"><span class="header-section-number">1.3</span> What does single-pass actually mean?<a href="#what-does-single-pass-actually-mean" class="self-link"></a></h2>
<p>The question really boils down to: is <code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> a single-pass iterator or not? The text we have in the standard, in <span>23.3.5.5 <a href="https://wg21.link/forward.iterators">[forward.iterators]</a></span> is:</p>
<blockquote>
<p><span class="marginalizedparent"><a class="marginalized" href="#pnum_1" id="pnum_1">3</a></span> Two dereferenceable iterators <code class="sourceCode cpp">a</code> and <code class="sourceCode cpp">b</code> of type <code class="sourceCode cpp">X</code> offer the <em>multi-pass guarantee</em> if:</p>
<ul>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_2" id="pnum_2">(3.1)</a></span> <code class="sourceCode cpp">a <span class="op">==</span> b</code> implies <code class="sourceCode cpp"><span class="op">++</span>a <span class="op">==</span> <span class="op">++</span>b</code> and</li>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_3" id="pnum_3">(3.2)</a></span> <code class="sourceCode cpp">X</code> is a pointer type or the expression <code class="sourceCode cpp"><span class="op">(</span><span class="dt">void</span><span class="op">)++</span>X<span class="op">(</span>a<span class="op">)</span>, <span class="op">*</span>a</code> is equivalent to the expression <code class="sourceCode cpp"><span class="op">*</span>a</code>.</li>
</ul>
</blockquote>
<p><code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> very much satisfies both of those requirements. This issue here is not dereferencing. Given a <code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code>, this logic is fine:</p>
<blockquote>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1"></a><span class="dt">void</span> f<span class="op">(</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span> a<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>    <span class="kw">auto</span><span class="op">&amp;&amp;</span> x <span class="op">=</span> <span class="op">*</span>a;</span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="kw">auto</span><span class="op">&amp;&amp;</span> y <span class="op">=</span> <span class="op">*</span>a;</span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="kw">auto</span><span class="op">&amp;&amp;</span> z <span class="op">=</span> <span class="op">*</span>a;</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>This is fine. Nothing actually happens - no move occurs. We’re simply binding three different rvalue references to the same underlying object. On the other hand, this is <em>not</em> fine:</p>
<blockquote>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1"></a><span class="dt">void</span> f<span class="op">(</span>move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span> a<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="kw">auto</span> x <span class="op">=</span> <span class="op">*</span>a;</span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="kw">auto</span> y <span class="op">=</span> <span class="op">*</span>a; <span class="co">// oops, double-move</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>It would appear that the fact that we can’t even dereference the same iterator twice (depending on what we do with the result) would argue against the fact that this can be considered to be a multi-pass iterator.</p>
<p>But it’s also worth point out that the same holds true of <em>any</em> range whose reference type is an rvalue reference type. With C++20, we can construct those easily enough:</p>
<blockquote>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1"></a><span class="dt">void</span> f<span class="op">(</span>vector<span class="op">&lt;</span>string<span class="op">&gt;</span> words<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="co">// currently (per P2446) this is a C++20 input range, whose reference type is string&amp;&amp;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="kw">auto</span> r1 <span class="op">=</span> words <span class="op">|</span> views<span class="op">::</span>move;</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="co">// currently this is a C++20 random access range, whose reference type is string&amp;&amp;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="kw">auto</span> r2 <span class="op">=</span> words <span class="op">|</span> views<span class="op">::</span>transform<span class="op">([](</span>string<span class="op">&amp;</span> s<span class="op">)</span> <span class="op">-&gt;</span> string<span class="op">&amp;&amp;</span> <span class="op">{</span> <span class="cf">return</span> std<span class="op">::</span>move<span class="op">(</span>s<span class="op">)</span>; <span class="op">})</span>;</span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>In the above, <code class="sourceCode cpp">r1</code> and <code class="sourceCode cpp">r2</code> are really the same range - they yield the same kinds of elements. <code class="sourceCode cpp">r1</code> is both a lot shorter to declare and conveys the intent more directly, but it’s also just an input range. But if we have a problem with <code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> being a random access iterator because it gives you a <code class="sourceCode cpp">T<span class="op">&amp;&amp;</span></code> which you can move out of, thus disallowing certain multi-pass algorithms… then surely we should have just as much a problem with <em>any</em> range whose reference type is an rvalue reference type? This is statically detectable after all. But we don’t do that, <code class="sourceCode cpp">r2</code> is still random access. Which I think is correct.</p>
<p>There are algorithms that aren’t usable with <code class="sourceCode cpp">move_iterator</code>s. For instance, <code class="sourceCode cpp">ranges<span class="op">::</span>sort<span class="op">(</span>words <span class="op">|</span> views<span class="op">::</span>move<span class="op">)</span></code> would clearly be a disaster. But a <code class="sourceCode cpp">move_view<span class="op">&lt;</span>R<span class="op">&gt;</span></code> wouldn’t satisfy the constraints of <code class="sourceCode cpp">ranges<span class="op">::</span>sort</code> anyway becuse a <code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> doesn’t satisfy <code class="sourceCode cpp">permutable</code> because it doesn’t satisfy <code class="sourceCode cpp">indirectly_movable_storable</code>. And any algorithm that would compile with <code class="sourceCode cpp">move_iterator</code>, but break at runtime, probably has the wrong constraints too (since it would break just as much for the <code class="sourceCode cpp">r2</code> example above).</p>
<p>Ultimately, it’s not clear to me why <code class="sourceCode cpp">move_iterator<span class="op">&lt;</span>T<span class="op">*&gt;</span></code> needs to be a C++20 input iterator – which pushes the burden to library authors everywhere to have to recognize <code class="sourceCode cpp">move_iterator</code> and work around its deficiencies, rather than simply making it properly advertise its capabilities.</p>
<h1 data-number="2" style="border-bottom:1px solid #cccccc" id="proposal"><span class="header-section-number">2</span> Proposal<a href="#proposal" class="self-link"></a></h1>
<p>Change <code class="sourceCode cpp">std<span class="op">::</span>move_iterator<span class="op">&lt;</span>Iter<span class="op">&gt;::</span>iterator_concept</code> to be <code class="sourceCode cpp">Iter</code>’s <code class="sourceCode cpp">iterator_concept</code>.</p>
<p>In <span>23.5.3.2 <a href="https://wg21.link/move.iterator">[move.iterator]</a></span>:</p>
<blockquote>
<div>
<div class="sourceCode" id="cb7"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb7-1"><a href="#cb7-1"></a>namespace std {</span>
<span id="cb7-2"><a href="#cb7-2"></a>  template&lt;class Iterator&gt;</span>
<span id="cb7-3"><a href="#cb7-3"></a>  class move_iterator {</span>
<span id="cb7-4"><a href="#cb7-4"></a>  public:</span>
<span id="cb7-5"><a href="#cb7-5"></a>    using iterator_type     = Iterator;</span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">-   using iterator_concept  = input_iterator_tag;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="va">+   using iterator_concept  = <em>see below</em>;</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>    using iterator_category = <em>see below</em>;                      // not always present</span>
<span id="cb7-9"><a href="#cb7-9"></a>    using value_type        = iter_value_t&lt;Iterator&gt;;</span>
<span id="cb7-10"><a href="#cb7-10"></a>    using difference_type   = iter_difference_t&lt;Iterator&gt;;</span>
<span id="cb7-11"><a href="#cb7-11"></a>    using pointer           = Iterator;</span>
<span id="cb7-12"><a href="#cb7-12"></a>    using reference         = iter_rvalue_reference_t&lt;Iterator&gt;;</span></code></pre></div>
</div>
<div class="addu">
<p><span class="marginalizedparent"><a class="marginalized" href="#pnum_4" id="pnum_4">0</a></span> The member <em>typedef-name</em> <code class="sourceCode cpp">iterator_concept</code> is defined as follows:</p>
<ul>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_5" id="pnum_5">(0.1)</a></span> If <code class="sourceCode cpp">Iterator</code> models <code class="sourceCode cpp">random_access_range</code>, then <code class="sourceCode cpp">iterator_concept</code> denotes <code class="sourceCode cpp">random_access_iterator_tag</code>.</li>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_6" id="pnum_6">(0.2)</a></span> Otherwise, if <code class="sourceCode cpp">Iterator</code> models <code class="sourceCode cpp">bidirectional_range</code>, then <code class="sourceCode cpp">iterator_concept</code> denotes <code class="sourceCode cpp">bidirectional_iterator_tag</code>.</li>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_7" id="pnum_7">(0.3)</a></span> Otherwise, if <code class="sourceCode cpp">Iterator</code> models <code class="sourceCode cpp">forward_range</code>, then <code class="sourceCode cpp">iterator_concept</code> denotes <code class="sourceCode cpp">forward_iterator_tag</code>.</li>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_8" id="pnum_8">(0.4)</a></span> Otherwise, <code class="sourceCode cpp">iterator_concept</code> denotes <code class="sourceCode cpp">input_iterator_tag</code>.</li>
</ul>
</div>
<p><span class="marginalizedparent"><a class="marginalized" href="#pnum_9" id="pnum_9">1</a></span> The member <em>typedef-name</em> <code class="sourceCode cpp">iterator_category</code> is defined if and only if […]</p>
</blockquote>
<p>Add a new feature-test macro to <span>17.3.2 <a href="https://wg21.link/version.syn">[version.syn]</a></span>:</p>
<blockquote>
<div class="addu">
<div class="sourceCode" id="cb8"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1"></a>#define __cpp_lib_move_iterator_concept 20XXXXL // also in &lt;iterators&gt;</span></code></pre></div>
</div>
</blockquote>
<h1 data-number="3" style="border-bottom:1px solid #cccccc" id="bibliography"><span class="header-section-number">3</span> References<a href="#bibliography" class="self-link"></a></h1>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-LWG1211">
<p>[LWG1211] Alisdair Meredith. Move iterators should be restricted as input iterators. <br />
<a href="https://wg21.link/lwg1211">https://wg21.link/lwg1211</a></p>
</div>
<div id="ref-P0896R4">
<p>[P0896R4] Eric Niebler, Casey Carter, Christopher Di Bella. 2018-11-09. The One Ranges Proposal. <br />
<a href="https://wg21.link/p0896r4">https://wg21.link/p0896r4</a></p>
</div>
<div id="ref-P1206R6">
<p>[P1206R6] Corentin Jabot, Eric Niebler, Casey Carter. 2021-08-03. Conversions from ranges to containers. <br />
<a href="https://wg21.link/p1206r6">https://wg21.link/p1206r6</a></p>
</div>
<div id="ref-P2446R1">
<p>[P2446R1] Barry Revzin. 2021-11-17. views::all_move. <br />
<a href="https://wg21.link/p2446r1">https://wg21.link/p2446r1</a></p>
</div>
</div>
</div>
</div>
</body>
</html>
